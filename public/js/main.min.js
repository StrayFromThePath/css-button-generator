(function(){var e={initialize:function(){this.setUpListeners();this.setUpPlugins();this.updateCssResult();this.updateHtmlArea()},setUpListeners:function(){$("#slider-border-radius").on("slide",$.proxy(this.borderRadChange,this));$("#slider-border-size").on("slide",$.proxy(this.borderSizeChange,this));$("#bg-color").on("change",$.proxy(this.BgColor,this));$("#border-color").on("change",$.proxy(this.BrColor,this));$("#btn-text").on("keyup",$.proxy(this.BtnText,this));$("#text-color").on("change",$.proxy(this.BtnColorText,this));$("#font").on("change",$.proxy(this.BtnFontText,this));$("#slider-font-size").on("slide",$.proxy(this.FontSize,this));$("#slider-width").on("slide",$.proxy(this.SliderWidth,this));$("#slider-height").on("slide",$.proxy(this.SliderHeiht,this));$("form").on("submit",e.submitForm);$("form").on("keydown","input",e.removeError)},create:$(".result-button"),setUpPlugins:function(){$("#slider-border-radius").slider({range:"min",max:25,min:0,animate:"fast"});$("#slider-border-size").slider({range:"min",max:6,min:0,animate:"fast"});$("#slider-height").slider({range:"min",max:30,min:0,animate:"fast"});$("#slider-width").slider({range:"min",max:60,min:0,animate:"fast"});$("#slider-font-size").slider({range:"min",max:46,min:12,animate:"fast",slide:function(e,t){$("#amount").val(t.value+" px")}});$("#amount").val($("#slider-font-size").slider("value")+" px")},borderRadChange:function(e,t){this.create.css({"border-radius":t.value});this.updateCssResult()},borderSizeChange:function(e,t){this.create.css({"border-width":t.value});this.updateCssResult()},SliderHeiht:function(e,t){this.create.css({"padding-top":t.value,"padding-bottom":t.value});this.updateCssResult()},SliderWidth:function(e,t){this.create.css({"padding-left":t.value,"padding-right":t.value});this.updateCssResult()},BgColor:function(){var e="#"+$("#bg-color").val();this.create.css({"background-color":e});this.updateCssResult()},BrColor:function(){var e="#"+$("#border-color").val();this.create.css({"border-color":e});this.updateCssResult()},BtnText:function(){$("#button").text($("#btn-text").val());this.updateHtmlArea()},BtnColorText:function(){var e="#"+$("#text-color").val();this.create.css({color:e});this.updateCssResult()},BtnFontText:function(){var e=$("#font").val();this.create.css({"font-family":e});this.updateCssResult()},FontSize:function(e,t){this.create.css({"font-size":t.value});this.updateCssResult()},updateCssResult:function(){var e=this.create.css("border-radius"),t=this.create.css("border-width"),n=this.create.css("background-color"),r=this.create.css("border-color"),i=this.create.css("color"),s=this.create.css("padding-top")+" "+this.create.css("padding-left"),o=this.create.css("font-size")+" "+this.create.css("font-family"),u=$("#slider-border-size").slider("value"),a=$("#slider-border-radius").slider("value"),f=$("#resultcss");if(u>0){f.text(".create-button {\n"+"font: "+o+";\n"+"padding: "+s+";\n"+"background-color: "+n+";\n"+"border: "+t+" solid "+r+";\n"+"color: "+i+";\n"+"-webkit-border-radius: "+e+";\n"+"-moz-border-radius: "+e+";\n"+"border-radius: "+e+";\n"+"};")}else{f.text(".create-button {\n"+"font"+": "+o+";\n"+"padding"+": "+s+";\n"+"background-color"+": "+n+";\n"+"color"+": "+i+";\n"+"-webkit-border-radius"+": "+e+";\n"+"-moz-border-radius"+": "+e+";\n"+"border-radius"+": "+e+";\n"+"};")}},updateHtmlArea:function(){var e=$("#resulthtml");e.text('<button class="create-button">'+$("#btn-text").val()+"</button>")},submitForm:function(t){t.preventDefault();var n=$(this);submitBtn=n.find('button[type="submit"]');if(e.validateForm(n)===false)return false;submitBtn.attr("disabled","disabled");var r=n.serialize();$.ajax({url:"send.php",type:"POST",data:r}).done(function(e){if(e==="OK"){var e='<div class="bg-success">Код отправлен!</div>';$("#msg").find(".msg_text").html(e)}else{var e='<div class="bg-danger">Неправильный email</div>';$("#msg").find(".msg_text").html(e)}}).always(function(){submitBtn.removeAttr("disabled")})},validateForm:function(e){var t=e.find("input"),n=true;t.tooltip("destroy");$.each(t,function(e,t){var r=$(t),t=r.val(),i=r.parents(".form-group"),s="Введите Email";if(t.length===0){i.addClass("has-error").removeClass("has-success");r.tooltip({trigger:"manual",placement:"right",title:s}).tooltip("show");n=false}else{i.addClass("has-success").removeClass("has-error")}});return n},removeError:function(){$(this).tooltip("destroy").parents(".form-group").removeClass("has-error")}};e.initialize()})()